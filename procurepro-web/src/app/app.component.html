<div class="app-container" *ngIf="auth.isAuthenticated()">
  <nav class="sidebar">
    <div class="logo">
      <h2>ProcurePro</h2>
    </div>
    <div class="nav-links">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">
        <span>📊</span> Dashboard
      </a>
      <a routerLink="/rfq" routerLinkActive="active" class="nav-link">
        <span>📋</span> RFQs
      </a>
      <a routerLink="/bids" routerLinkActive="active" class="nav-link">
        <span>💼</span> Bids
      </a>
      <a routerLink="/purchase-orders" routerLinkActive="active" class="nav-link">
        <span>📄</span> Purchase Orders
      </a>
      <a routerLink="/invoices" routerLinkActive="active" class="nav-link">
        <span>💰</span> Invoices
      </a>
      <a routerLink="/vendors" routerLinkActive="active" class="nav-link" *ngIf="auth.hasRole('ProcurementManager') || auth.hasRole('Admin')">
        <span>🏢</span> Vendors
      </a>
      <div class="nav-divider" *ngIf="auth.hasRole('Admin')"></div>
      <a routerLink="/users" routerLinkActive="active" class="nav-link" *ngIf="auth.hasRole('Admin')">
        <span>👥</span> Users
      </a>
      <a routerLink="/roles" routerLinkActive="active" class="nav-link" *ngIf="auth.hasRole('Admin')">
        <span>🔐</span> Roles
      </a>
    </div>
    <div class="user-section">
      <div class="user-info">
        <strong>{{ auth.token?.displayName }}</strong>
        <small>{{ auth.token?.roles?.[0] || 'User' }}</small>
      </div>
      <button class="logout-btn" (click)="logout()">Logout</button>
    </div>
  </nav>
  <main class="main-content">
    <router-outlet />
  </main>
</div>

<router-outlet *ngIf="!auth.isAuthenticated()" />
